define(["stringUtil","underscore","purl"],function(e,t,n){var r={};return r.setAjaxPage=function(t,n,r,i){i=i||"javascript:void(0)",t=+t,n=+n,r=+r;if(t<=0)return"";var s=[],o=r%n>0?r/n+1:r/n;o=Math.floor(o),t<=0?t=1:t>o&&(t=o),r>=0&&s.push(e.format("<span>查询到<b>{0}</b>条信息，共<b>{1}</b>页，每页<b>{2}</b>条</span>",r,o,n)),t>1?s.push(e.format('<a href="{0}" name="1">首页</a><a href="{0}" name="{1}">上一页</a>',i,t-1)):s.push(e.format("<span>首页</span><span>上一页</span>"));var u=9,a=t===1?'<span class="cur">1</span>':e.format('<a href="{0}" name="1">1</a>',i);s.push(a),t>u&&s.push("…");var f=t+u-1,l=t-u>0?t-u:2;for(var c=l;c<f;c++){if(c<=1)continue;if(c>=o)break;t===c?s.push(e.format('<span class="cur">{0}</span>',c)):s.push(e.format('<a href="{0}" name="{1}">{1}</a>',i,c))}return o>=t+u&&s.push("…"),o<=1||(t===o?s.push(e.format('<span class="cur">{0}</span>',o)):s.push(e.format('<a href="{0}" name="{1}">{1}</a>',i,o))),t<o&&t>0?s.push(e.format('<a href="{0}" name="{1}">下一页</a><a href="{0}" name="{2}">尾页</a>',i,t+1,o)):s.push("<span>下一页</span><span>尾页</span>"),s.join("")},r.setHrefPageFormat=function(r){var i=n(unescape(location.href)),s=i.param(),o=i.attr("host"),u=i.attr("path"),a=[],f=t.keys(s);if(!t.contains(f,"p")&&!r)a.push("p=1");else{s.p=r;for(var l in s){var c=e.format("{0}={1}",l,escape(s[l]));a.push(c)}}return e.format("http://{0}{1}?{2}",o,u,a.join("&"))},r});