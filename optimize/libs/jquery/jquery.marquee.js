(function(e){e.fn.kxbdSuperMarquee=function(t){var n=e.extend({},e.fn.kxbdSuperMarquee.defaults,t);return this.each(function(){function A(){var e=n.direction=="left"||n.direction=="right"?"scrollLeft":"scrollTop";if(n.isMarquee){if(n.loop>0){C+=n.scrollAmount;if(C>a*n.loop)return r[e]=0,clearInterval(p)}var t=r[e]+(n.direction=="left"||n.direction=="up"?1:-1)*n.scrollAmount}else if(n.duration){if(!(d++<g)){t=y,clearInterval(l),h=!1;return}h=!0;var t=Math.ceil(D(d,v,m,g));d==g&&(t=y)}else{var t=y;clearInterval(l)}n.direction=="left"||n.direction=="up"?t>=a&&(t-=a):t<=0&&(t+=a),r[e]=t,n.isMarquee?p=setTimeout(A,n.scrollDelay):d<g?(l&&clearTimeout(l),l=setTimeout(A,n.scrollDelay)):h=!1}function O(e){h=!0;var t=n.direction=="left"||n.direction=="right"?"scrollLeft":"scrollTop",i=n.direction=="left"||n.direction=="up"?1:-1;N+=i,e==undefined&&n.navId&&(S.eq(T).removeClass("navOn"),T+=i,T>=w?T=0:T<0&&(T=w-1),S.eq(T).addClass("navOn"),N=T);var s=N<0?a:0;d=0,v=r[t],y=e!=undefined?e:s+n.distance*N%a,i==1?y>v?m=y-v:m=y+a-v:y>v?m=y-a-v:m=y-v,g=n.duration,l&&clearTimeout(l),l=setTimeout(A,n.scrollDelay)}function M(){c=setInterval(function(){O()},n.time*1e3)}function _(){clearInterval(c)}function D(e,t,n,r){return-n*(e/=r)*(e-2)+t}function P(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t}var t=e(this),r=t.get(0),i=t.width(),s=t.height(),o=t.children(),u=o.children(),a=0,f=n.direction=="left"||n.direction=="right"?1:0,l,c,h,p,d,v,m,g,y,b,w,E,S,x=[],T=0,N=0,C=0;o.css(f?"width":"height",1e4);var k="<ul>";if(n.isEqual){b=u[f?"outerWidth":"outerHeight"](),w=u.length,a=b*w;for(var L=0;L<w;L++)x.push(L*b),k+="<li>"+(L+1)+"</li>"}else u.each(function(t){x.push(a),a+=e(this)[f?"outerWidth":"outerHeight"](),k+="<li>"+(t+1)+"</li>"});k+="</ul>";if(a<(f?i:s))return;o.append(u.clone()).css(f?"width":"height",a*2),n.navId&&(E=e(n.navId).append(k).hover(_,M),S=e("li",E),S.each(function(t){e(this).bind(n.eventNav,function(){if(h)return;if(T==t)return;O(x[t]),S.eq(T).removeClass("navOn"),T=t,e(this).addClass("navOn")})}),S.eq(T).addClass("navOn")),n.direction=="right"||n.direction=="down"?r[f?"scrollLeft":"scrollTop"]=a:r[f?"scrollLeft":"scrollTop"]=0,n.isMarquee?(p=setTimeout(A,n.scrollDelay),t.hover(function(){clearInterval(p)},function(){clearInterval(p),p=setTimeout(A,n.scrollDelay)}),n.controlBtn&&e.each(n.controlBtn,function(t,r){e(r).bind(n.eventA,function(){n.direction=t,n.oldAmount=n.scrollAmount,n.scrollAmount=n.newAmount}).bind(n.eventB,function(){n.scrollAmount=n.oldAmount})})):(n.isAuto&&(M(),t.hover(_,M)),n.btnGo&&e.each(n.btnGo,function(t,r){e(r).bind(n.eventGo,function(){if(h==1)return;n.direction=t,O(),n.isAuto&&(_(),M())})}))})},e.fn.kxbdSuperMarquee.defaults={isMarquee:!1,isEqual:!0,loop:0,newAmount:3,eventA:"mousedown",eventB:"mouseup",isAuto:!0,time:5,duration:50,eventGo:"click",direction:"left",scrollAmount:1,scrollDelay:10,eventNav:"click"},e.fn.kxbdSuperMarquee.setDefaults=function(t){e.extend(e.fn.kxbdSuperMarquee.defaults,t)}})(jQuery);